{% extends "base.html" %}
{% block content %}
<div class="content-section">
    <h2 style="margin-bottom: 20px; color: #00ffff;">// NEW WALLET</h2>

    <div class="card" style="margin-bottom: 20px; border-color: #ffff00;">
        <div style="display: flex; align-items: center; gap: 15px;">
            <span style="font-size: 24px;">üé∞</span>
            <div>
                <div style="color: #ffff00;">Target Slot: #{{ slot_num }}</div>
                <div style="color: #666; font-size: 12px;">0x{{ key_slot }}</div>
            </div>
        </div>
    </div>

    {% if step == 1 %}
    <div class="card">
        <div class="card-title">// WARNING</div>
        <p style="margin-bottom: 15px; color: #ff0040;">
            This generates a 24-word seed phrase. <strong>WRITE IT DOWN ON PAPER.</strong>
        </p>
        <ul style="margin: 15px 0; padding-left: 20px; color: #66cc66; line-height: 2;">
            <li>Never store digitally</li>
            <li>Never screenshot</li>
            <li>Never share</li>
            <li>Lose it = lose funds forever</li>
        </ul>
        <form method="POST" data-loading="Generating keys on SE050...">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">
            <input type="hidden" name="action" value="generate">
            {% if pin_required %}
            <div class="form-group" style="margin-bottom: 15px;">
                <label style="color: #ffff00;">Signing PIN Required</label>
                <input type="password" name="signing_pin" class="form-control"
                       placeholder="Enter signing PIN to authorize" required>
            </div>
            {% endif %}
            <button type="submit" class="btn" style="background: #00ff41; color: #000; width: 100%; padding: 15px; font-size: 16px;">
                [ GENERATE SEED PHRASE ]
            </button>
        </form>
    </div>

    {% elif step == 2 %}
    <div class="card">
        <div class="card-title">// YOUR SEED PHRASE</div>
        <p style="margin-bottom: 15px; color: #ff0040; font-weight: bold;">
            ‚ö†Ô∏è WRITE THESE 24 WORDS DOWN. NOW. IN ORDER.
        </p>
        <div style="background: #000; padding: 20px; border: 1px solid #00ff41; margin-bottom: 20px;">
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                {% for word in mnemonic.split() %}
                <div style="font-family: monospace; padding: 8px; background: #0d1117; border: 1px solid #00ff4144; text-align: center;">
                    <span style="color: #666; font-size: 10px;">{{ loop.index }}.</span>
                    <span style="color: #00ffff;">{{ word }}</span>
                </div>
                {% endfor %}
            </div>
        </div>

        <div style="border: 2px solid #ffff00; padding: 15px; margin-bottom: 20px; background: #ffff0011;">
            <p style="color: #ffff00; margin-bottom: 10px;">‚úèÔ∏è VERIFY: Type word #{{ verify_word }}</p>
            <form method="POST" data-loading="Writing key to SE050...">
                <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">
                <input type="hidden" name="action" value="confirm">
                <input type="hidden" name="mnemonic" value="{{ mnemonic }}">
                <input type="hidden" name="verify_word" value="{{ verify_word }}">
                <div style="display: flex; gap: 10px;">
                    <input type="text" name="verify" class="form-control" required
                           placeholder="Word #{{ verify_word }}" autocomplete="off"
                           style="flex: 1; text-transform: lowercase;">
                    <button type="submit" class="btn" style="background: #00ff41; color: #000;">
                        [ CONFIRM ]
                    </button>
                </div>
            </form>
        </div>
    </div>

    {% elif step == 3 %}
    <div class="card" style="border-color: #00ff41; text-align: center; padding: 40px;">
        <div style="font-size: 48px; margin-bottom: 20px;">‚úì</div>
        <div class="card-title" style="color: #00ff41;">WALLET CREATED</div>
        <p style="margin: 20px 0; color: #66cc66;">
            Private key secured in SE050 slot #{{ slot_num }}
        </p>
        <a href="{{ url_for('dashboard_bp.dashboard') }}" class="btn" style="background: #00ff41; color: #000; padding: 15px 30px;">
            [ GO TO DASHBOARD ]
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
